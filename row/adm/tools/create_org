
import row.constants as c
import row.registry
import row.adm.adm_utils
import traceback

import row.logger
logger = row.logger.get('row_log')

# Ensure org is registered and inactive
# Propagate model
# Create users
# Mark active:


def create_organization(gis, org_id,):
    logger.info ("Logging to %s" % row.consolidation.logger.LOG_FILE)
    try:
        admin_event_oid = row.adm.adm_utils.log_admin_event (gis, c.ADMIN_EVENT_CREATE_ORG, org_id, notes='')

        org_info = row.utils.get_layer_from_tag (gis, c.ADMIN_ITEM_TAG_ORGANIZATION, 0).query(where=f"Org_ID='{org_id}' AND DeploymentStatus=0")[0]['attributes']
        org_info = 


    except Exception as ex:
        logger.info (org_id + ': ' + str(ex))
        logger.debug (traceback.format_exc())
        logger.info ("%s: Deployment failed" % org_id)


    row.adm.adm_utils.log_admin_event_result (gis, admin_event_oid, 'Success')
    return


if __name__ == '__main__':
    logger.info ("Logging to %s" % row.logger.LOG_FILE)
    gis = row.adm.adm_utils.login_as_admin ()
    
    create_organization(gis, 'ROW2_DEVOrgA')